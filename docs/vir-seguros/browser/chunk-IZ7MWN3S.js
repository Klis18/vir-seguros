import{a as Y,b as Z,c as ee,d as te,e as F}from"./chunk-NQWGNM67.js";import{A as w,B as M,C as g,D as T,E as G,F as $,G as B,H as W,I as z,J,N as H,O as K,P as Q,Q as U,R as X,z as E}from"./chunk-T5RHK3CC.js";import{Gb as a,Hb as _,Ib as b,Jb as O,Kb as q,Lb as R,Nb as y,Qa as s,Ra as f,Y as V,ca as P,gb as u,ha as S,ib as I,mb as c,nb as A,ob as D,pa as h,pb as j,qa as x,qb as r,rb as o,sb as C,tb as v,wa as N,wb as p,yb as d}from"./chunk-PHZSOFUQ.js";var L=(()=>{class t{constructor(){this.insuredList=[{insuredId:"0996716599",insuredName:"Lia Valenzuela",phone:"0997685674",age:"32"},{insuredId:"0967845654",insuredName:"Roberto Sandoval",phone:"0998887675",age:"29"},{insuredId:"0912343432",insuredName:"Laura Benavides",phone:"0992276765",age:"45"}]}getInsuredList(){let e=localStorage.getItem("insuredList");return e&&(this.insuredList=JSON.parse(e)),this.insuredList}getInsured(e){let n=this.insuredList.findIndex(i=>i.insuredId==e);return this.insuredList[n]}addInsured(e){this.insuredList.push(e),this.saveInLocalStorage()}deleteInsured(e){this.insuredList=this.insuredList.filter(n=>n.insuredId!==e),this.saveInLocalStorage()}updateInsured(e){let n=this.insuredList.findIndex(i=>i.insuredId===e.insuredId);n!==-1&&(this.insuredList[n]=e),this.saveInLocalStorage()}saveInLocalStorage(){localStorage.setItem("insuredList",JSON.stringify(this.insuredList))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function de(t,m){if(t&1&&(r(0,"span",8),a(1),o()),t&2){let e=d();s(),_(e.showFormsErrorMessages("insuredId"))}}function le(t,m){if(t&1&&(r(0,"span",8),a(1),o()),t&2){let e=d();s(),_(e.showFormsErrorMessages("insuredName"))}}function ce(t,m){if(t&1&&(r(0,"span",8),a(1),o()),t&2){let e=d();s(),_(e.showFormsErrorMessages("phone"))}}function me(t,m){if(t&1&&(r(0,"span",8),a(1),o()),t&2){let e=d();s(),_(e.showFormsErrorMessages("age"))}}function ue(t,m){t&1&&(r(0,"button",17)(1,"mat-icon",19),a(2," save "),o(),r(3,"span"),a(4," Guardar "),o()())}var re=(()=>{class t{constructor(e,n,i){this.fb=e,this.insuredService=n,this.alertService=i,this.data=P(Z),this.dialogRef=P(Y)}ngOnInit(){this.insuredForm=this.fb.group({insuredId:["",[g.required,g.minLength(10),g.maxLength(10)]],insuredName:["",[g.required]],phone:["",[g.required,g.minLength(10),g.maxLength(10)]],age:["",[g.required,g.min(18)]]}),this.data.type=="edit"?this.typeForm="Editar":this.typeForm="Agregar";let e=this.insuredService.getInsured(this.data.insuredId);this.data.type=="edit"&&this.insuredForm.setValue(e)}onSubmit(){this.insuredForm.valid&&(this.data.type=="edit"?this.editInsured():this.addInsured())}addInsured(){try{this.insuredService.addInsured(this.insuredForm.value),this.closeForm(),this.alertService.showAlertSuccesMessage("agregado")}catch{this.alertService.showAlertErrorMessage("eliminado")}}editInsured(){try{this.insuredService.updateInsured(this.insuredForm.value),this.closeForm(),this.alertService.showAlertSuccesMessage("editado")}catch{this.alertService.showAlertErrorMessage("editar")}}closeForm(){this.dialogRef.close()}verifyError(e){let n=this.insuredForm.get(e);return!!(n?.invalid&&n.touched)}showFormsErrorMessages(e){let n=this.insuredForm.get(e);if(!n)return"";let i=n.errors,l={required:"Este campo es obligatorio",minlength:`El valor m\xEDnimo de caracteres es ${i?.minlength?.requiredLength}`,maxlength:`El valor m\xE1ximo de caracteres es ${i?.maxlength?.requiredLength}`,min:`La edad m\xEDnima permitida es ${i?.min?.min}`};for(let k in n.errors)return n.errors.hasOwnProperty(k)?l[k]||"Error desconocido":""}static{this.\u0275fac=function(n){return new(n||t)(f(Q),f(L),f(F))}}static{this.\u0275cmp=S({type:t,selectors:[["app-insured-modal"]],standalone:!0,features:[y],decls:33,vars:8,consts:[[1,"relative","py-4"],[1,"absolute","right-0","mr-4","hover:text-red-800",3,"click"],[1,"px-8"],[1,"text-2xl"],[1,"grid","grid-cols-2","gap-4","mt-5",3,"ngSubmit","formGroup"],[1,"col-span-2","md:col-span-1","lg:col-span-1"],["for","id",1,"block"],["type","text","formControlName","insuredId","placeholder","0997867567",1,"px-2","py-2","w-full","rounded-lg","border-2",3,"readOnly"],[1,"text-red-500","text-xs"],["for","name",1,"block"],["type","text","formControlName","insuredName","placeholder","Margarita Hern\xE1n",1,"px-2","py-2","w-full","rounded-lg","border-2"],["for","phone",1,"block"],["type","text","formControlName","phone","placeholder","0977656452",1,"px-2","py-2","w-full","rounded-lg","border-2"],["for","age",1,"block"],["type","text","formControlName","age","placeholder","28",1,"px-2","py-2","w-full","rounded-lg","border-2"],[1,"relative","col-span-2"],[1,"absolute","right-0","flex"],["type","submit",1,"bg-cyan-900","text-white","flex","items-center","justify-center","px-4","py-2","my-4","w-fit","rounded-lg","mr-2"],["type","button",1,"bg-slate-800","text-white","flex","items-center","justify-center","px-4","py-2","my-4","w-fit","rounded-lg",3,"click"],[1,"mr-2"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"mat-icon",1),p("click",function(){return i.closeForm()}),a(2," close "),o()(),r(3,"div",2)(4,"p",3),a(5),o(),C(6,"hr"),r(7,"form",4),p("ngSubmit",function(){return i.onSubmit()}),r(8,"div",5)(9,"label",6),a(10,"C\xE9dula"),o(),C(11,"input",7),u(12,de,2,1,"span",8),o(),r(13,"div",5)(14,"label",9),a(15,"Nombre"),o(),C(16,"input",10),u(17,le,2,1,"span",8),o(),r(18,"div",5)(19,"label",11),a(20,"Tel\xE9fono"),o(),C(21,"input",12),u(22,ce,2,1,"span",8),o(),r(23,"div",5)(24,"label",13),a(25,"Edad"),o(),C(26,"input",14),u(27,me,2,1,"span",8),o(),r(28,"div",15)(29,"div",16),u(30,ue,5,0,"button",17),r(31,"button",18),p("click",function(){return i.closeForm()}),a(32," Cancelar "),o()()()()()),n&2&&(s(5),b("",i.typeForm," Asegurado"),s(2),I("formGroup",i.insuredForm),s(4),I("readOnly",i.typeForm==="Editar"),s(),c(12,i.verifyError("insuredId")?12:-1),s(5),c(17,i.verifyError("insuredName")?17:-1),s(5),c(22,i.verifyError("phone")?22:-1),s(5),c(27,i.verifyError("age")?27:-1),s(3),c(30,i.insuredForm.valid?30:-1))},dependencies:[X,B,M,T,G,z,J,w,E]})}}return t})();function pe(t,m){if(t&1){let e=v();r(0,"mat-icon",8),p("click",function(){h(e);let i=d().$implicit,l=d(2);return x(l.sendInsured(i.insuredId))}),a(1," add "),o()}}function _e(t,m){if(t&1){let e=v();r(0,"mat-icon",9),p("click",function(){h(e);let i=d().$implicit,l=d(2);return x(l.editInsured(i.insuredId))}),a(1," edit "),o(),r(2,"mat-icon",10),p("click",function(){h(e);let i=d().$implicit,l=d(2);return x(l.deleteInsured(i.insuredId))}),a(3," delete "),o()}}function ge(t,m){if(t&1&&(r(0,"tr",4)(1,"td",6),u(2,pe,2,0,"mat-icon",7)(3,_e,4,0),o(),r(4,"td",6),a(5),o(),r(6,"td",6),a(7),o(),r(8,"td",6),a(9),o(),r(10,"td",6),a(11),o()()),t&2){let e=m.$implicit,n=d(2);s(2),c(2,n.tableType==="Assignment"?2:-1),s(),c(3,n.tableType==="Insured"?3:-1),s(2),_(e.insuredId),s(2),_(e.insuredName),s(2),_(e.phone),s(2),_(e.age)}}function he(t,m){if(t&1){let e=v();r(0,"button",14),p("click",function(){h(e);let i=d(3);return x(i.changePage(i.currentPage-1))}),r(1,"mat-icon"),a(2," chevron_left "),o()()}if(t&2){let e=d(3);I("disabled",e.currentPage===1)}}function xe(t,m){if(t&1){let e=v();r(0,"div",5),u(1,he,3,1,"button",11),r(2,"span"),a(3,"P\xE1gina "),o(),r(4,"input",12),R("ngModelChange",function(i){h(e);let l=d(2);return q(l.currentPage,i)||(l.currentPage=i),x(i)}),p("change",function(){h(e);let i=d(2);return x(i.changePage(i.currentPage))}),o(),r(5,"span"),a(6),o(),r(7,"button",13),p("click",function(){h(e);let i=d(2);return x(i.changePage(i.currentPage+1))}),r(8,"mat-icon"),a(9," chevron_right "),o()()()}if(t&2){let e=d(2);s(),c(1,e.currentPage>1?1:-1),s(3),O("ngModel",e.currentPage),I("min",1)("max",e.totalPages),s(2),b(" de ",e.totalPages,""),s(),I("disabled",e.currentPage===e.totalPages)}}function fe(t,m){if(t&1&&(r(0,"div",0)(1,"table",1)(2,"thead")(3,"tr",2)(4,"td",3),a(5,"Acciones"),o(),r(6,"td",3),a(7,"C\xE9dula"),o(),r(8,"td",3),a(9,"Nombre"),o(),r(10,"td",3),a(11,"Tel\xE9fono"),o(),r(12,"td",3),a(13,"Edad"),o()()(),r(14,"tbody"),D(15,ge,12,6,"tr",4,A),o()()(),u(17,xe,10,6,"div",5)),t&2){let e=d();s(15),j(e.getPageData()),s(2),c(17,e.totalPages>=1?17:-1)}}var Ne=(()=>{class t{constructor(e,n,i){this.insuredService=e,this.dialog=n,this.alertService=i,this.sendInsuredCodeSelected=new N,this.tableType=""}ngOnInit(){this.getInsuredList(),this.itemsPerPage=5,this.currentPage=1,this.totalPages=Math.ceil(this.insuredList.length/this.itemsPerPage)}getInsuredList(){this.insuredList=this.insuredService.getInsuredList()}sendInsured(e){this.sendInsuredCodeSelected.emit(e)}deleteInsured(e){try{this.insuredService.deleteInsured(e),this.getInsuredList(),this.alertService.showAlertSuccesMessage("eliminado")}catch{this.alertService.showAlertErrorMessage("eliminar")}}editInsured(e){this.dialog.open(re,{data:{type:"edit",insuredId:e},width:"700px",maxWidth:"800px",height:"55%"}).afterClosed().subscribe(i=>{})}getPageData(){let e=(this.currentPage-1)*this.itemsPerPage,n=this.currentPage*this.itemsPerPage;return this.insuredList.slice(e,n)}changePage(e){e>=1&&e<=this.totalPages?this.currentPage=e:this.currentPage=1}static{this.\u0275fac=function(n){return new(n||t)(f(L),f(ee),f(F))}}static{this.\u0275cmp=S({type:t,selectors:[["app-insured-table"]],inputs:{tableType:"tableType"},outputs:{sendInsuredCodeSelected:"sendInsuredCodeSelected"},standalone:!0,features:[y],decls:1,vars:1,consts:[[1,"overflow-x-auto","max-w-full"],[1,"w-full"],[1,"bg-cyan-900","text-white","text-center"],[1,"p-2"],[1,"poppins-light","text-center","border-b-2"],[1,"text-right","bg-slate-50","py-2","border-t-2","border-cyan-900","px-2","flex","justify-end","items-center","w-full"],[1,"px-4","py-2"],[1,"text-cyan-900","mr-4","cursor-pointer"],[1,"text-cyan-900","mr-4","cursor-pointer",3,"click"],[1,"text-blue-900","mr-4","cursor-pointer",3,"click"],[1,"text-red-900","mr-4","cursor-pointer",3,"click"],[1,"pr-4","flex","items-center",3,"disabled"],["type","number",1,"rounded-lg","border-2","size-8","text-center",3,"ngModelChange","change","ngModel","min","max"],[1,"pl-4","flex","items-center",3,"click","disabled"],[1,"pr-4","flex","items-center",3,"click","disabled"]],template:function(n,i){n&1&&u(0,fe,18,1),n&2&&c(0,i.insuredList.length>=0?0:-1)},dependencies:[w,E,te,U,M,W,T,K,H,$]})}}return t})();export{L as a,re as b,Ne as c};
