import{a as L}from"./chunk-JTOQFQJF.js";import{a as te,b as ne}from"./chunk-BIVXLCIQ.js";import{a as ie,c as re}from"./chunk-IZ7MWN3S.js";import{a as W,c as B,d as ee,e as R}from"./chunk-NQWGNM67.js";import"./chunk-F5PGA7PS.js";import{A as M,B as V,D as F,F as N,H as Q,K as U,L as X,M as Y,N as Z,O as $,Q as j,z as b}from"./chunk-T5RHK3CC.js";import"./chunk-73VDZPOL.js";import"./chunk-XAZLOLJU.js";import{Gb as s,Hb as _,Ib as q,Jb as w,Kb as E,Lb as T,Nb as x,Pb as H,Qa as o,Ra as d,a as O,b as G,ca as A,gb as S,ha as f,ib as g,kc as J,mb as C,mc as K,nb as P,ob as D,pa as I,pb as k,qa as h,qb as t,rb as n,sb as v,tb as y,wb as l,yb as u}from"./chunk-PHZSOFUQ.js";var me=(i,m)=>({"text-green-700":i,"text-red-800":m});function pe(i,m){if(i&1){let e=y();t(0,"mat-icon",9),l("click",function(){I(e);let a=u().$implicit,c=u(2);return h(c.deleteInsuredInsurance(a.id))}),s(1," delete "),n()}}function ge(i,m){if(i&1&&(t(0,"tr",4)(1,"td",6),S(2,pe,2,0,"mat-icon",7),n(),t(3,"td",6),s(4),n(),t(5,"td",6),s(6),n(),t(7,"td",6),s(8),n(),t(9,"td",6),s(10),n(),t(11,"td",6),s(12),n(),t(13,"td",8),s(14),n()()),i&2){let e=m.$implicit;o(2),C(2,e.state!=="Inactivo"?2:-1),o(2),_(e.id),o(2),_(e.insuredId),o(2),_(e.insuredName),o(2),_(e.insuranceCode),o(2),_(e.insuranceName),o(),g("ngClass",H(8,me,e.state==="Activo",e.state==="Inactivo")),o(),_(e.state)}}function _e(i,m){if(i&1){let e=y();t(0,"button",13),l("click",function(){I(e);let a=u(3);return h(a.changePage(a.currentPage-1))}),t(1,"mat-icon"),s(2," chevron_left "),n()()}if(i&2){let e=u(3);g("disabled",e.currentPage===1)}}function fe(i,m){if(i&1){let e=y();t(0,"div",5),S(1,_e,3,1,"button",10),t(2,"span"),s(3,"P\xE1gina "),n(),t(4,"input",11),T("ngModelChange",function(a){I(e);let c=u(2);return E(c.currentPage,a)||(c.currentPage=a),h(a)}),l("change",function(){I(e);let a=u(2);return h(a.changePage(a.currentPage))}),n(),t(5,"span"),s(6),n(),t(7,"button",12),l("click",function(){I(e);let a=u(2);return h(a.changePage(a.currentPage+1))}),t(8,"mat-icon"),s(9," chevron_right "),n()()()}if(i&2){let e=u(2);o(),C(1,e.currentPage>1?1:-1),o(3),w("ngModel",e.currentPage),g("min",1)("max",e.totalPages),o(2),q(" de ",e.totalPages,""),o(),g("disabled",e.currentPage===e.totalPages)}}function Ie(i,m){if(i&1&&(t(0,"div",0)(1,"table",1)(2,"thead")(3,"tr",2)(4,"td",3),s(5,"Acciones"),n(),t(6,"td",3),s(7,"Id"),n(),t(8,"td",3),s(9,"C\xE9dula"),n(),t(10,"td",3),s(11,"Asegurado"),n(),t(12,"td",3),s(13,"C\xF3digo seguro"),n(),t(14,"td",3),s(15,"Seguro"),n(),t(16,"td",3),s(17,"Estado"),n()()(),t(18,"tbody"),D(19,ge,15,11,"tr",4,P),n()()(),S(21,fe,10,6,"div",5)),i&2){let e=u();o(19),k(e.getPageData()),o(2),C(21,e.totalPages>=1?21:-1)}}var se=(()=>{class i{constructor(e,r){this.insuredInsurancesService=e,this.alertService=r}ngOnInit(){this.insuranceInsuredData=this.getInsuredInsuranceList(),this.itemsPerPage=5,this.currentPage=1,this.totalPages=Math.ceil(this.insuranceInsuredData.length/this.itemsPerPage)}getInsuredInsuranceList(){return this.insuredInsurancesService.getListInsurancesInsuredAssignments()}deleteInsuredInsurance(e){try{this.insuredInsurancesService.updateStatusInsuranceInsured(e),this.alertService.showAlertSuccesMessage("eliminado")}catch{this.alertService.showAlertErrorMessage("eliminar")}}getPageData(){let e=(this.currentPage-1)*this.itemsPerPage,r=this.currentPage*this.itemsPerPage;return this.insuranceInsuredData.slice(e,r)}changePage(e){e>=1&&e<=this.totalPages?this.currentPage=e:this.currentPage=1}static{this.\u0275fac=function(r){return new(r||i)(d(L),d(R))}}static{this.\u0275cmp=f({type:i,selectors:[["app-insured-insurances-table"]],standalone:!0,features:[x],decls:1,vars:1,consts:[[1,"overflow-x-auto","max-w-full"],[1,"w-full","text-center"],[1,"bg-cyan-900","text-white"],[1,"p-2"],[1,"border-b-2"],[1,"text-right","bg-slate-50","py-2","border-t-2","border-cyan-900","w-full","px-2","flex","justify-end","items-center"],[1,"px-4","py-2"],[1,"text-red-800","cursor-pointer"],[1,"poppins-semibold","px-4","py-2",3,"ngClass"],[1,"text-red-800","cursor-pointer",3,"click"],[1,"pr-4","flex","items-center",3,"disabled"],["type","number",1,"rounded-lg","border-2","size-8","text-center",3,"ngModelChange","change","ngModel","min","max"],[1,"pl-4","flex","items-center",3,"click","disabled"],[1,"pr-4","flex","items-center",3,"click","disabled"]],template:function(r,a){r&1&&S(0,Ie,22,1),r&2&&C(0,a.insuranceInsuredData.length>=0?0:-1)},dependencies:[K,J,j,V,Q,F,$,Z,N,M,b]})}}return i})();var oe=(()=>{class i{constructor(e){this.insuredService=e,this.id="",this.dialogRef=A(W)}getIdInsuredSelected(e){this.id=e,this.getInsuredById(this.id),this.dialogRef.close(this.insuredSelectedData)}getInsuredById(e){return this.insuredSelectedData=this.insuredService.getInsured(e),this.insuredSelectedData}static{this.\u0275fac=function(r){return new(r||i)(d(ie))}}static{this.\u0275cmp=f({type:i,selectors:[["app-select-insured"]],standalone:!0,features:[x],decls:6,vars:1,consts:[[1,"p-8"],[1,"text-2xl"],[3,"sendInsuredCodeSelected","tableType"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"p",1),s(2,"Asegurados"),n(),v(3,"hr"),t(4,"div")(5,"app-insured-table",2),l("sendInsuredCodeSelected",function(p){return a.getIdInsuredSelected(p)}),n()()()),r&2&&(o(5),g("tableType","Assignment"))},dependencies:[re]})}}return i})();function xe(i,m){if(i&1&&(t(0,"option",13),s(1),n()),i&2){let e=m.$implicit;g("value",e.insuranceCode),o(),_(e.insuranceName)}}function Se(i,m){if(i&1){let e=y();t(0,"button",17),l("click",function(){I(e);let a=u();return h(a.saveInsuranceAssignment())}),t(1,"mat-icon"),s(2," save "),n(),s(3," Guardar "),n()}}var le=(()=>{class i{constructor(e,r,a,c){this.insurancesService=e,this.insuranceInsuredService=r,this.dialog=a,this.alertService=c,this.insurancesList=[],this.insuranceSelectedCode="",this.insuredSelectedId="",this.insuredSelectedName="",this.dialogRef=A(W)}ngOnInit(){this.getInsurancesList()}getInsurancesList(){this.insurancesList=this.insurancesService.getInsurances()}openInsuredList(){this.dialog.open(oe,{width:"700px",maxWidth:"800px",height:"80%"}).afterClosed().subscribe(r=>{this.insuredSelectedData=r,this.insuredSelectedName=this.insuredSelectedData.insuredName})}getInsuranceSelectedByCode(){return this.insuranceSelectedData=this.insurancesService.getInsuranceByCode(this.insuranceSelectedCode),this.insuranceSelectedData}verifyEmptyFormValues(){return this.insuredSelectedName!==""&&this.insuranceSelectedCode!==""}saveInsuranceAssignment(){try{this.getInsuranceSelectedByCode();let e=te().substring(0,4),r=G(O(O({id:"reg-"+e},this.insuranceSelectedData),this.insuredSelectedData),{state:"Activo"});this.insuranceInsuredService.assignInsurance(r),this.closeModal(),this.alertService.showAlertSuccesMessage("guardado")}catch{this.alertService.showAlertErrorMessage("guardar")}}closeModal(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||i)(d(ne),d(L),d(B),d(R))}}static{this.\u0275cmp=f({type:i,selectors:[["app-insurances-asignment-modal"]],standalone:!0,features:[x],decls:27,vars:3,consts:[[1,"flex","justify-end","pt-4","pb-2","px-4"],[1,"text-slate-800","hover:text-red-800",3,"click"],[1,"pb-8","px-8"],[1,"text-2xl"],[1,"grid","grid-cols-2","mt-6","gap-6"],[1,"col-span-2","md:col-span-1","lg:col-span-1"],["for","insured",1,"block"],[1,"flex","items-center"],["type","text","readonly","",1,"w-fit","p-2","border-2","rounded-lg","mr-2",3,"ngModelChange","ngModel"],[1,"p-2","bg-cyan-900","text-center","rounded-lg","text-white",3,"click"],["for","insurance",1,"block"],["name","insurance","id","insurance",1,"p-2","border-2","rounded-lg","w-full",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"mt-8","flex","justify-end"],[1,"p-2","bg-cyan-900","text-white","rounded-lg","flex","items-center","justify-center","mr-2"],["type","button",1,"p-2","bg-slate-800","text-white","rounded-lg",3,"click"],[1,"p-2","bg-cyan-900","text-white","rounded-lg","flex","items-center","justify-center","mr-2",3,"click"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"mat-icon",1),l("click",function(){return a.closeModal()}),s(2," close "),n()(),t(3,"div",2)(4,"p",3),s(5,"Asignar Seguros a Asegurados"),n(),v(6,"hr"),t(7,"div",4)(8,"div",5)(9,"label",6),s(10,"Asegurado"),n(),t(11,"div",7)(12,"input",8),T("ngModelChange",function(p){return E(a.insuredSelectedName,p)||(a.insuredSelectedName=p),p}),n(),t(13,"button",9),l("click",function(){return a.openInsuredList()}),s(14,"Seleccionar Asegurado"),n()()(),t(15,"div",5)(16,"label",10),s(17,"Seguro"),n(),t(18,"select",11),T("ngModelChange",function(p){return E(a.insuranceSelectedCode,p)||(a.insuranceSelectedCode=p),p}),t(19,"option",12),s(20,"--Selecciona un seguro--"),n(),D(21,xe,2,2,"option",13,P),n()()(),t(23,"div",14),S(24,Se,4,0,"button",15),t(25,"button",16),l("click",function(){return a.closeModal()}),s(26," Cancelar "),n()()()),r&2&&(o(12),w("ngModel",a.insuredSelectedName),o(6),w("ngModel",a.insuranceSelectedCode),o(3),k(a.insurancesList),o(3),C(24,a.verifyEmptyFormValues()?24:-1))},dependencies:[j,X,Y,V,U,F,N,M,b]})}}return i})();var Je=(()=>{class i{constructor(e){this.dialog=e}addAsignment(){this.dialog.open(le,{width:"700px",maxWidth:"800px",height:"45%"}).afterClosed().subscribe(r=>{console.log("modal cerrado")})}static{this.\u0275fac=function(r){return new(r||i)(d(B))}}static{this.\u0275cmp=f({type:i,selectors:[["app-insurances-assignment"]],standalone:!0,features:[x],decls:10,vars:0,consts:[[1,"p-2"],[1,"flex","items-center"],[1,"text-3xl","mr-2"],[1,"text-white","bg-cyan-900","px-2","py-2","rounded-lg","flex","items-center","justify-center",3,"click"],[1,"my-8"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1)(2,"span",2),s(3,"Asignaci\xF3n de seguros"),n(),t(4,"span",3),l("click",function(){return a.addAsignment()}),t(5,"mat-icon"),s(6," add "),n(),s(7," Agregar "),n()(),t(8,"div",4),v(9,"app-insured-insurances-table"),n()())},dependencies:[se,ee,M,b]})}}return i})();export{Je as InsurancesAssignmentComponent};
